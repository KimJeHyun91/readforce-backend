# ì´ íŒŒì¼ì„ í”„ë¡œì íŠ¸ì˜ ë£¨íŠ¸ ë””ë ‰í„°ë¦¬ì— ìƒì„±í•˜ì„¸ìš”.
services:
  # Spring Boot ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë¹„ìŠ¤
  - type: web
    name: readforce-backend
    env: spring
    plan: free # í•„ìš”ì— ë”°ë¼ ìš”ê¸ˆì œ ë³€ê²½ ê°€ëŠ¥ (ì˜ˆ: 'starter')
    buildCommand: "./gradlew build"
    startCommand: "java -Dserver.port=10000 -jar build/libs/readforce-0.0.1-SNAPSHOT.jar"
    healthCheckPath: "/actuator/health" # ì• í”Œë¦¬ì¼€ì´ì…˜ ìƒíƒœ í™•ì¸ ê²½ë¡œ
    envVars:
      # Renderê°€ ë°ì´í„°ë² ì´ìŠ¤ ì •ë³´ë¥¼ ìë™ìœ¼ë¡œ ì£¼ì…í•´ì£¼ëŠ” ë¶€ë¶„
      - key: SPRING_DATASOURCE_URL
        fromDatabase:
          name: readforce-db
          property: url
      - key: SPRING_DATASOURCE_USERNAME
        fromDatabase:
          name: readforce-db
          property: user
      - key: SPRING_DATASOURCE_PASSWORD
        fromDatabase:
          name: readforce-db
          property: password
      
      # Renderê°€ Redis ì •ë³´ë¥¼ ìë™ìœ¼ë¡œ ì£¼ì…í•´ì£¼ëŠ” ë¶€ë¶„
      - key: SPRING_DATA_REDIS_HOST
        fromService:
          type: redis
          name: readforce-redis
          property: host
      - key: SPRING_DATA_REDIS_PORT
        fromService:
          type: redis
          name: readforce-redis
          property: port
          
      # ğŸš¨ ì‚¬ìš©ìê°€ Render ëŒ€ì‹œë³´ë“œì—ì„œ ì§ì ‘ ì…ë ¥í•´ì•¼ í•  í™˜ê²½ë³€ìˆ˜ë“¤
      # valueë¥¼ ì ì§€ ì•Šê³  keyë§Œ ì„ ì–¸í•©ë‹ˆë‹¤.
      - key: GEMINI_API_KEY
      - key: GMAIL_PASSWORD
      - key: GMAIL_USERNAME
      - key: GOOGLE_CLIENT_ID
      - key: GOOGLE_CLIENT_SECRET
      - key: JWT_SECRET_KEY
      - key: KAKAO_CLIENT_ID
      - key: KAKAO_CLIENT_SECRET

  # PostgreSQL ë°ì´í„°ë² ì´ìŠ¤
  - type: db
    name: readforce-db
    databaseName: readforce   # ìƒì„±ë  ë°ì´í„°ë² ì´ìŠ¤ ì´ë¦„
    databaseUser: readforce   # ìƒì„±ë  ì‚¬ìš©ì ì´ë¦„
    plan: free # í•„ìš”ì— ë”°ë¼ ìš”ê¸ˆì œ ë³€ê²½ ê°€ëŠ¥
    postgresMajorVersion: 15 # PostgreSQL ë²„ì „

  # Redis
  - type: redis
    name: readforce-redis
    plan: free # í•„ìš”ì— ë”°ë¼ ìš”ê¸ˆì œ ë³€ê²½ ê°€ëŠ¥